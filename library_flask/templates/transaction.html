{% extends "page.html" %}

{% block  content %}
<section class="text-gray-600 body-font relative px-4 md:px-0">
    {% if transaction %} 
  <form class=" bg-white flex flex-col md:w-3/4 mx-auto md:py-8 mt-8 md:mt-0" 
    action="/transaction" method="post">
    <fieldset disabled="disabled">
      <h2 class=" text-gray-900 text-lg mb-3 font-medium title-font"> Transaction Details - <span class="text-gray-400">  {{transaction.id}} </span></h2>
      <fieldset disabled="disabled">
        {% if message %}
          <span class="text-sm text-green-400">{{message}}</span>
        {% endif %}

        <h3>Member</h3>
        <div class="relative mt-2 mb-4 md:flex">  
            <div class="md:w-1/2 mr-3">
                <label for="fullname" class="leading-7 text-sm text-gray-600">Full Name</label>
                <input type="fullname" id="fullname" required value="{{member.fullname}}" name="issue" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
            <div class="md:w-1/2">
                <label for="email" class="leading-7 text-sm text-gray-600">Email</label>
                <input type="email" id="email" value="{{member.email}}" required name="email" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
        </div>

        <h3>Book</h3>
        <div class="relative mt-2 mb-4 ">
            <label for="return" class="leading-7 text-sm text-gray-600">Book Title</label>
            <input type="text" id="return" required name="return" value="{{transaction.book_title}}" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
        </div>
        <div class="relative mb-4 md:flex">
            <div class="md:w-1/2 mr-3">
                <label for="issue" class="leading-7 text-sm text-gray-600">Issue Date</label>
                <input type="date" id="issue" required value="{{transaction.booked_date.strftime('%Y-%m-%d')}}" required name="issue" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
            <div class="md:w-1/2">
                <label for="return" class="leading-7 text-sm text-gray-600">Return Date</label>
                <input type="date" id="return" required name="return" value="{{transaction.return_date.strftime('%Y-%m-%d') if transaction.return_date else ''}}" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
        </div>

        <div class="relative mb-4 md:flex">
            <div class="md:w-1/3 mr-3">
                <label for="monthly_amount" class="leading-7 text-sm text-gray-600">Monthly Amount</label>
                <input type="number" id="monthly_amount" name="monthly_amount" value="{{transaction.monthly_amount}}" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
            <div class="md:w-1/3 mr-3">
                <label for="received_amount" class="leading-7 text-sm text-gray-600">Total Amount</label>
                <input type="number" id="received_amount" name="received_amount" value="{{transaction.total_amount}}" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
            <div class="md:w-1/3">
                <label for="received_amount" class="leading-7 text-sm text-gray-600">Amount Received</label>
                <input type="number" id="received_amount" name="received_amount" value="{{transaction.amount_received}}" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
            </div>
        </div>
      
        {% if transaction.description %}
        <div class="relative mb-4">
                <label for="return" class="leading-7 text-sm text-gray-600">Description</label>
                <textarea id="description" required name="description" value="{{transaction.description}}" class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out">
              
        </div>
        {% endif %}
      <button class="inline-flex items-center bg-gray-200 border-0 py-2 px-3 focus:outline-none hover:bg-gray-300 text-base mt-4 md:mt-0 mb-4">
        <a id="go-back" href="">Go back</a>
    </button>     
        
    </div>
        </fieldset>
  </form>
  {% endif %}

  <script>

    // set button link
    const previousPageURL = document.referrer;
    const goBackButton = document.getElementById('go-back');
    goBackButton.href = previousPageURL;
</script>

</section>
{% endblock %}

